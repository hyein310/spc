<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style></style>
  </head>
  <body>
    <h1>실시간 검색기능</h1>
    <input type="text" placeholder="검색하세용.." id="searchInput" />
    <ul id="itemsList">
      <li>Apple</li>
      <li>Banana</li>
      <li>Orange</li>
      <li>Strawberry</li>
      <li>Grape</li>
      <li>Pineapple</li>
      <li>Mango</li>
      <li>Watermelon</li>
      <li>Blueberry</li>
      <li>Peach</li>
      <li>Cherry</li>
      <li>Pear</li>
      <li>Kiwi</li>
      <li>Plum</li>
      <li>Raspberry</li>
      <li>Coconut</li>
      <li>Pomegranate</li>
      <li>Lemon</li>
      <li>Fig</li>
      <li>Guava</li>
    </ul>
    <script>
      // 미션1. 실시간 검색 기능
      // 미션1-1. 검색창의 입력 결과 가져오기
      // 미션1-2. 해당 단어를 목록에 '포함'되어 있는지 확인 (includes 사용)
      // 미션1-3. 해당되는 것은 보여주고, 해당되지 않는 것은 숨긴다. (display: none; 활용)
      const searchInput = document.getElementById("searchInput");
      const itemsList = document.getElementById("itemsList");
      const items = itemsList.getElementsByTagName("li");
      const item2 = itemsList.querySelectorAll("li"); // List 형태라서 nodelist 가능

      searchInput.addEventListener("keyup", function () {
        for (let i = 0; i < items.length; i++) {
          const item = items[i]; // 전체 목록에서 하나의 아이템
          console.log("i : ", item);
          const text = item.textContent; // 그 하나의 아이템 글자
          if (text.includes(searchInput.value.toLowerCase())) {
            // 사용자가 입력한 값에 포함될 때
            item.style.display = "";
          } else {
            // 사용자가 입력한 값에 없을 때
            item.style.display = "none";
          }
        }
      });

      // 방법2. forEach를 쓰려면? 배열/리스트 형태만 가능
      searchInput.addEventListener("keyup", function () {
        // 변환 방법
        // 1. 기존의 items를 Array.from()에 넣고 캐스팅(변환하는 과정)
        // 2. 스프레드 연산자(...) 문법을 통해서 안에 있는 적절하게 패킹되어 있는 것을 개별적으로 풀어주는 연산자

        // 방법1.
        // Array.from(items).forEach((item) => {
        //   console.log(item);
        // });

        // 방법2.
        [...items].forEach((item) => {
          console.log(item);
        });

        // 방법3. 애초에 HTMLCollection이 아닌 NodeList라고 불리는 리스트 형태로 만들기
        item2.forEach((item) => {
          const text = item.textContent.toLowerCase();
          const filter = searchInput.value.toLowerCase();
          if (text.toLocaleLowerCase().includes(filter));
          else {
            item.style.display = "none";
          }
        });
      });
    </script>
  </body>
</html>
